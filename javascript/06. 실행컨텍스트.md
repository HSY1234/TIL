# 실행 컨텍스트(Execution Context)

- 실행 컨텍스트는 실행할 코드에 제공할 환경 정보들을 모아 놓은 **객체**로, 자바스크립트의 동적 언어로서의 성격을 가장 잘 파악할 수 있는 개념이다.
- 호이스팅, this, 외부 환경 정보를 구성하는 등 동작을 수행
- 클로저를 지원하는 대부분의 언어에 유사하거나 동일한 개념이 적용

## 실행 컨텍스트

- **실행할 코드에 제공할 환경 정보들을 모아놓은 객체**
- 특정 동일한 조건, 환경의 코드 덩어리들을 실행할때 필요한 조건/환경정보를 모아둠
- 실행 컨텍스트를 구성하는 방법으로는 전역공간, eval() 함수, 함수, module 등이 있다.
- 전역 실행 컨텍스트는 변수 객체를 생성하는 대신 자바스크립트 구동 환경이 별도로 제공하는 객체,  
  즉 전역 객체를 이용한다. 전역 객체에는 브라우저의 window , Node.js의 global 객체 등이 있다.
- 자동 생성되는 전역공간, 잘 쓰지않는 eval()함수를 제외하고 보통은 함수를 실행해서 생성한다.(ES6부터 블록({})에서도 가능)
- 구성

1. VariableEnvironment  
   현재 컨텍스트 내의 식별자들에 대한 정보+ 외부 환경 정보, 선언 시점의 LexicalEnvironment의 스냅샷으로 변경사항은 반영되지 않음
2. LexicalEnvironment  
   처음에는 VariableEnvironment와 같지만 변경사항이 실시간 반영
3. ThisBinding  
   this 식별자가 바라봐야할 대상 객체

## VariableEnvironment

- **식별자의 정보를 수집**
- VariableEnvironment에 담기는 내용은 LexicalEnvironment와 같지만 최초 실행시의 스냅샷을 유지한다.  
  (스냅샷이란? 특정 시간에 데이터 저장 장치의 상태를별도의 파일이나 이미지로 저장하는 기술로, 스냅샷 기능을 이용하여 데이터를 저장하면 유실된 데이터 복원과 일정 시점의 상태로 데이터를 복원할 수 있습니다.)
- 실행 컨텍스트를 생성할때 VariableEnvironment에 정보를 먼저 담고,  
  이를 그대로 복사해서 LexicalEnvironment를 만들고,  
  그 이후는 주로 LexicalEnvironment를 사용한다.

## LexicalEnvironment

- **각 식별자의 데이터를 계속 추적**
- 어휘적 환경, 정적 환경등으로 번역
- 백과사전이라고 이해하면 편함
- 컨텍스트를 구성하는 환경 정보들을 사전처럼 모아둔것
- enviromentRecord와 outerEnviromentReference로 구성됩니다.

1. environmentRecord와 호이스팅  
   현재 컨텍스트와 관련된 코드의 식별자 정보들이 저장된다.  
   함수에 지정된 매개변수 식별자, 선언한 함수가 있을 경우 그 함수 자체(정의까지), var로 선언된 변수의 식별자 등등  
   **코드 실행 전** 컨텍스트 내부 전체를 처음부터 끝까지 쭉 훑으며 **순서대로** 수집한다.  
   => `우리가 알고있는 호이스팅의 정체!`, 코드 실행전 모든 변수명을 미리 알고 있다.

## 호이스팅

- 끌어올리다 hoist + ing
- 변수는 선언부와 할당부를 나누어 선언부만 끌어올린다.

```js
var x;// 이거만


x=3;
--------------------
var x = 3;
```

- 함수는 선언은 함수 전체를 끌어올린다. (정의까지 다 같이)

```js
var sum = function sum(a,b){ return a+b; }// 선언형 => 할당한것 처럼 전부 끌어올린다.
---------------------------------
function sum(a,b){
 return a+b;
}
```
