# CPU 구조

CPU는 ALU, CU, 레지스터 등으로 구성되어 있다.  
ALU의 구성을 보고 싶다면 디지털 논리 회로를 공부할것

# ALU

ALU는 **레지스터**를 통해 피연산자를 받아들이고,  
제어장치로 부터 수행할 연산을 알려줄 **제어 신호**를 받아  
다양한 연산을 수행 후  
**레지스터**와 **플래그**에 결과값을 보냅니다

- CPU가 메모리에 접근하는 속도는 레지스터에 접근하는 속도보다 훨씬 느림
- CPU가 계산 할때마다 매번 메모리에 접근 한다면 속도가 매우 느리기 떄문 일단 레지스터에 저장!
- **플래그**는 연산의 결과값 뿐만 아니라 연산결과와 관련된 다른 정보를 제공
  - 결과는 음수
  - 결과값이 너무 크다(레지스터 보다)
  - 등등...

## 플래그(flag)

CPU가 프로그램 실행중 반드시 기억해야할 참고 정보  
플래그 레지스터에 저장

- 부호 플래그: 계산 결과의 부호
- 제로 플래그: 0인지 여부
- 캐리 플래그: 올림수나 빌림수가 발생했는지
- 오버 플로우 플래그: 오버플로우가 발생했는지
- 인터럽트 플래그: 인터럽트가 가능한지
- 슈퍼바이저 플래그: 커널모드로 실행중인지, 사용자 모드로 실행중인지
- 등등...

## ALU의 내부 구성요소

- 가산기
- 보수기
- 시프터
- 오버플로우 검출기
- ...

# 제어장치

- 제어 신호를 보내고, 명령어를 해석하는 부품
- CPU의 구성 요소중 가장 정교하게 설계, 제조사마다 구현 방식이나 명령어 해석 방식이 다 다름
- 제어장치는 클럭신호, 해석할 명령어, 플래그 레지스터의 플래그, 시스템 버스의 제어 버스로 전달된 제어 신호등을 받아들입니다
- 제어장치는 CPU내부로 제어 신호, CPU 외부로 제어 신호를 내보냅니다.

- 입력

  - 클럭
  - 명령어
  - 플래그
  - 시스템 버스의 제어버스로 들어오는 제어신호

- 출력
  - CPU 내부
    - ALU로 전달하는 제어신호 : 수행할 연산 지시
    - 레지스터에 전달하는 제어신호 : 레지스터간 데이터 이동, 레지스터에 저장된 명령어 해석
  - CPU 외부 : 시스템버스의 제어버스로 제어신호를
    - 메모리로 보내는 신호 : 메모리 쓰기, 메모리 읽기
    - 입출력 장치로 보내는 신호 : 입출력 값 읽기, 입출력 값 쓰기

## 클럭(clock)

- 클럭이란 컴퓨터의 모든 부품이 일사불란하게 움직일수 있게 하는 시간 단위
- 클럭 주기에 맞춰 레지스터의 데이터가 다른 레지스터로 이동, ALU 연산 수행, 메모리 저장된 명령어 읽기등 모든 컴퓨터의 활동은 클럭 기준
- 모든 부품이 한 클럭 단위로 정해지지 않음, 보통 한 명령어는 여러 클럭에 걸쳐 수행됨
- 클럭은 말 그대로 최소 시간 단위이다

## 명령어

- 명령어 레지스터라는 특별한 레지스터에 명령어는 저장되고, CU는 명령어를 여기서 받아들이고 해석한뒤 제어신호를 발생시킴

## 플래그

- 플래그 레지스터값을 받아들이고 제어신호를 발생

## 제어버스로 전달된 제어신호

- 제어 신호는 CPU만이 아니라, 메모리, 입출력장치같은 외부에서도 발생 가능
- 외부에서 시스템버스의 제어버스로 제어신호를 보냄

# 레지스터
