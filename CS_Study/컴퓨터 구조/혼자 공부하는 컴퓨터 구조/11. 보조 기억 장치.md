# 보조 기억장치

- 하드디스크
- 플래시 메모리
  - usb
  - SD카드
  - SSD
- CD
- 플로피 디스크

# 하드디스크(HDD, Hard Disk Drive)

- 자기적인 방식으로 데이터를 저장하는 보조기억장치
- 자기 디스크(magnetic disk)
- 동그란 원판(플래터, platter)에 데이터 저장
  - 플래터는 자기 물질로 덮여 있어 N극과 S극을 저장(0,1)
- 플래터를 회전시키는 구성 요소를 스핀들(spindle)이라고 함
- 스핀들이 플래터를 돌리는 속도를 RPM(분당회전수)
- 플래터에서 데이터를 읽고 쓴는 바늘 헤드(head)
- 헤드를 원하는 위치로 이동시키는 디스크암(disk arm)
- CD나 LP에 비해 하드는 많은 정보를 저장해야해서 플래터는 여러 겹 + 양면
- 양면 플래터이므로, 기본적으로 플래터 1개당 위아래 두개의 헤드 사용
- 플래터 한면 당 헤드가 하나면 단일 헤드 디스크(single-head disk)
- 플래터 한면 당 헤드가 여러개면 다중 헤드 디스크(multiple-head disk)
- 다중 헤드 디스크는 한 디스크 암에 트랙마다 헤드가 달려있어 탐색시간이 0으로 없다
- 단일 헤드 디스크는 헤드가 움직이므로 이동 헤드 디스크라고 하고
- 다중 헤드 디스크는 헤드가 안 움직이므로 고정 헤드 디스크라고 한다

## 하드디스크의 저장 원리

- 플래터

  - 트랙(track) : 플래터를 여러개의 동심원(링처럼) 나눔
  - 섹터(sector) : 한 트랙을 여로 조각으로 나눔, 한조각을 섹터라 하고 하드디스크의 가장 작은 단위
  - 섹터는 일반적으로 512바이트지만 하드 종류에 따라 다름
  - 하나 이상의 섹터를 모아서 블럭이라고도 함
  - 여러 겹의 플래터의 같은 위치의 트랙들을 실린더라고 부른다.(마치 원통처럼 생김)
  - 보통 연속된 정보는 한 실린더에 기록된다 => 따로 디스크 암을 움직이지 않고 접근가능하므로

- 탐색 시간(seek time) : 접근하려는 데이터가 저장된 트랙까지 헤드를 이동시키는 시간(헤드 앞뒤로 디스크암 이동)
- 회전 지연(rotational latency) : 헤드가 있는 곳으로 플래터를 회전시키는 시간
- 전송 시간(transfer time) : 하드 디스크와 컴퓨터 간에 데이터를 전송하는 시간
- 탐색 시간과 회전 지연을 줄이기 위해 RPM을 높이는것도 중요하지만, 참조 지역성을 위해 데이터가 조금만 옮겨도 접근할수있게 배치하는것도 중요

# 플래시 메모리(flash memory)

- 전기적으로 데이터를 읽고 쓸 수 있는 반도체 기반의 저장 장치
- NAND와 NOR 플래시 메모리가 있다 (각각 NAND, NOR 연산 게이트를 기반으로 만들어졌다)
- 현재 주로 NAND 플래시 메모리를 대용량 저장 장치로 사용
- 플래시 메모리의 가장 작은 단위는 셀(cell)
  - SLC(Single level cell): 셀당 1비트 저장
  - MLC(Multiple level cell): 셀당 2비트 저장
  - TLC(Triple level cell): 셀당 3비트 저장
  - QLC: 셀당 4비트
- ROM의 일종인 EEPROM으로부터 발전하여 현재의 모습으로 정착했다.(즉 ROM도 플래시 메모리)
- 롬에서 나온 것이니 롬의 일종으로 봐야 할 것 같지만, 플래시 메모리는 기록된 내용을 보존한다는 측면에서는 ROM과 유사한 특징이 있으면서도 데이터 접근 방식도 메모리 방식이 아닌 하드 디스크의 섹터와 유사한 페이지 단위로 접근한다는 특성으로 인해 주기억 장치가 아닌 보조 기억 장치로 분류된다.

## SLC 타입

- 0, 1
- 수명이 제일 길다, 쓰고 지우기 제일 많이 가능
- 비트의 빠른 입출력이 가능
- 용량 대비 가격이 높음
- 읽고 쓰기가 매우 많이 반복되며 고성능의 빠른 저장 장치가 필요한경우 사용

## MLC 타입

- 00, 01, 10, 11
- SLC 대비 가격이 저렴

## TLC 타입

- 3비트
- 수명과 속도가 가장 떨어짐, 용량이 가격대비 쌈
- 시중에서 많이 쓰는건 보통 MLC, TLC

## 셀의 단위

- 셀
- 페이지 : 플래시 메모리의 읽고 쓰기의 단위는 페이지, 3가지 상태가 존재
  - Free: 어떤 상태도 저장 안됨, 새로 저장 가능
  - Valid: 유효한 데이터가 저장된 상태
  - Invalid: 필요없는 쓰레기 값 저장 중
  - 하드와 달리 덮어쓰기가 불가능해 Valid에는 새 데이터 저장 불가
- 블록 : 삭제는 블록 단위만 가능
  - 애초에 EEPROM에서 유래한 기술인 만큼 비트 단위로 덮어쓰기를 하면 쓰기 속도가 극단적으로 느려지고, 그걸 블록 단위로 일괄 처리해서 덮어쓰기 속도를 끌어올린 게 플래시 메모리의 시작이다.
- 플레인
- 다이(die)

위에서 아래로 내려올수록 하위 단위의 묶음이 됨 (다이 = 플레인이 모인 단위)

## 셀의 덮어쓰기

1. 블록 X가 4개의 페이지로 이루어져있고, 이중 2개는 A B고 2개는 비었다고 가정
2. 블록 X에 한페이지에 C를 저장 => A,B,C,Free 상태
3. A를 A'로 수정하고 싶을때? 덮어쓰기가 불가능하다 플래시 메모리는
4. A를 Invaild로 바꾸고 A,B,C,A'로 블록을 채운다(나머지 3개는 Valid)
5. A는 쓰레기 값인데 용량을 차지하고 있다. A만 지울수가 없음 삭제는 블록 단위만 가능
6. 플래시 메모리의 가비지 컬렉션 기능 발동
7. 유효한 페이지들만 새 블록 Y로 옮기고, A,B,C,A' 블록 X은 통째로 삭제
