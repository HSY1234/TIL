# 물리 계층

- 데이터를 전기 신호로 변환하기 위해 필요한 계층
- 0과 1로만 이루어진 비트열을 전기 신호로 변환하려면 **물리 계층**의 기술이 필요
- 물리 계층의 하드웨어의 종류로는
  - 전기 신호
    - NIC(랜카드)
  - 전송 매체
    - 유선 : 케이블
    - 무선 : 전파
  - 리피터
  - 허브
  - 등...
- L1 (Layer 1)이라고도 불리며, 물리 계층에서 사용하는 장비를 L1 장비라고도 한다

# 전기 신호

- 아날로그 신호 : 음파, 물결 모양 처럼 연속적으로 이어는 신호
- 디지털 신호 : 0과 1로 구성된 불연속적인 신호
- 데이터 송신 측 컴퓨터는 전송하는 0과 1의 비트열 데이터를 전기 신호로 변환하여 수신측에 전다
- 데이터 수신 측 컴퓨터는 수신한 전기 신호를 0과 1의 비트열 데이터로 복원한다

## NIC(Network Interface Controller)

- 이더넷 카드, 네트워크 어댑터라고 불린다
- 한국 일본에서는 랜카드라고도 불린다
- 컴퓨터는 네트워크를 통해 데이터를 송수신할수 있도록 **랜 카드**가 메인보드에 내장되거나, 따로 가지고 있다
- 랜카드는 0과 1 비트 데이터 <-> 전기신호, 전파 로 변환하는 장치

# 전송매체

- 전송매체는 데이터가 흐르는 물리적 선로
- **유선**과 **무선**이 존재
- 유선
  - 트위스트 페어 케이블
  - 광케이블
- 무선
  - 라디오 파
  - 마이크로 파
  - 적외선

## 트위스트 페어 케이블(twisted pair cable)

- 일반적으로 **랜 케이블**(LAN cable)이라고 불린다
- UTP 케이블 (Unshielded Twist Pair, 비차폐 연선)
- STP 케이블 (Shielded Twist Pair, 차폐 연선)
- 실드는 금속호일이나 금속매듭등으로 외부에서 발생하는 노이즈를 막는 역할
- 종류
  - 다이렉트 케이블
  - 크로스 케이블
- 랜 케이블의 양쪽 끝에는 **RJ-45**라고 부르는 커넥터가 붙어 있다

## UTP 케이블

- 구리선 8개를 2개씩 꼬아 4쌍으로 만든 전선으로 실드로 보호되어 있지 않음
- 선을 꼬는 이유는 노이즈 감소를 위해서
- 가격이 저렴해서 많이 이용
- 외부 노이즈의 영향을 받기 쉬움
- UTP 케이블의 분류
  - Cat3 : 10Mbps
  - Cat5 : 100Mbps
  - Cat5e : 1000Mbps
  - Cat6 : 1000Mbps
  - Cat6a : 10Gbps
  - Cat7 : 10Gbps
- 분류에 따라 **규격**과 **속도**가 다르다

## STP 케이블

- UTP케이블 처럼 꼬은 2개의 선을 실드로 보호한 케이블
- 노이즈 영향이 매우 낮음
- 비싸서 보편적으로 이용 X

## 다이렉트 케이블

- 구리선 8개를 **같은 순서**로 커넥터에 연결한 케이블 (12345678 = 12345678)
- 기본적으로 1,2 주황색 페어가 송신(Tx) 3,6 녹색 페어가 수신(Rx)을 담당한다
- 45 청색 페어는 전화선용
- 78 갈색 페어는 스위치 장비가 PoE를 지원할때 직류전원을 공급받는 선이다
- 청색 갈색은 네트워크 데이터 전송에는 쓰이지 않았으나, 최근 기가비트 기기는 4페어를 다 쓴다
- 컴퓨터와 **스위치**를 연결할때 사용
- 스위치(허브)가 송수신 신호를 제어하므로 케이블상에서 바꾸지 않는다

## 크로스 케이블

- 구리선 8개중 한쪽 커넥터의 **1과 2번**에 연걸되는 구리선을 다른쪽 커넥터의 **3번과 6번**에 연결한 케이블 (12345678 = 36145278)
- 컴퓨터간에 **직접 랜 케이블**로 연결할 때 사용
- 한쪽의 송신이 다른 한쪽의 수신이 되어야하므로 라인을 바꾸게 된다

## 다이렉트 케이블과 크로스 케이블 구별 이유

- 다이렉트나 크로스 케이블 둘다 실제로는 1,2,3,6번 구리선만 사용, 나머지 4개는 사용하지 않음
- 컴퓨터간에 직접 데이터를 보낼때 양쪽 컴퓨터는 모두 1,2번을 사용
- 컴퓨터간 통신을 사용할때 동시에 1,2를 사용하면 신호가 겹치게 됨
- 일부러 중간에 전선을 교차시켜 송신측과 수신측이 올바르게 연결되도록 한다

컴퓨터 A와 컴퓨터 B를 허브나 스위치 없이 1:1로 연결한다고 가정하자. 컴퓨터 A의 송신 측은 컴퓨터 B의 수신 측에 연결되어야 하고, 반대로 컴퓨터 A의 수신 측은 컴퓨터 B의 송신 측과 연결이 되어야 한다. 그래서, 컴퓨터와 컴퓨터를 직접 연결할 경우는 크로스 케이블로 연결하는 것이 원칙적으로는 맞는다. 중간에 어떤 단계를 거치든 한 번 (정확히는 홀수번) 꼬여 있어야 정상적인 통신을 할 수 있다.

그런데, 컴퓨터가 2대 뿐인 것도 아니고, 여러 대가 존재하기에 이를 집선하기 위해서는 네트워크 허브나 L2 스위치 같은 것이 필요하다. 그런데, 두 컴퓨터가 각자 크로스 케이블을 써서 허브에 연결했다고 치면, 결국 2번 꼬여서 통신이 안 된다. 그래서, 허브 내부에서 이론상 한 번 더 꼬아 주어야 한다. 그럼 최종적으로 3번 꼬이면서 정상적으로 통신이 된다.

어차피 허브에서 한 번 꼬아 주는 역할을 한다면, 컴퓨터와 허브 간의 연결은 다이렉트로 연결하는 게 낫지 않겠냐는 생각으로 다이렉트 케이블이 나왔다. 문제는 허브와 허브 간은 여전히 한 번 더 꼬아 줄 필요가 있어서 크로스 케이블이 사용되었다.

겉모습이 똑같이 생긴 두 종류의 케이블이 상황에 따라 서로 다르게 쓰여야 하다 보니, 불편할 수밖에 없었다. 라벨링이 확실하게 되어 있지 않다면 단자에 연결된 선 색을 보거나 테스터로 직접 확인하여 판단해야 한다.

그래서, 결국 다이렉트 케이블이든 크로스 케이블이든 연결만 되면 알아서 이를 감지하고, 케이블에 맞게 TX/RX를 바꿔 주는 기능이 등장하였으며 이를 보통 MDI/MDI-X 자동 감지 기능이라고 부른다. 2018년 기준 대부분의 컴퓨터/네트워크 카드/스위치/공유기 등은 이 기능을 탑재하고 있기 때문에, 다이렉트 케이블이든 크로스 케이블이든 아무거나 꼽아도 상관없이 통신이 잘 된다.

## auto MDIX (auto Medium-Dependent Interface crossover)

- 다이렉트 케이블과 크로스 케이블을 자동으로 판단하는 기능
- 컴퓨터나 라우터의 인터페이스는 MDI
- 스위치나 허브의 인터페이스는 MDI-X
- MDI와 MDI-X를 연결할때는 다이렉트 케이블
- 같은 인터페이스 끼리는 크로스케이블 사용
- 최근에는 자동으로 판단하고 연결 신호를 전환하는 스위치나 허브가 대부분

# 리피터 & 허브

## 리피터

- **리피터**(repeater): 전기 신호를 정형(일그러진 전기 신호를 복원)하고 증폭하는 네트워크 중계 장비
- 최근에는 네트워크 장비에 기본으로 기능을 지원한다.

## 허브

- **허브**(hub) : 컴퓨터의 신호를 여러 개의 다른 선으로 분산시켜 내보낼 수 있는 장치, **포트**(실제로 통신하는 통로)를 여러개 가지고 있다
- 허브는 리피터와 마찬가지로 전기 신호를 정형하고 증폭하는 기능을 한다
- 허브는 어느 한 포트로 데이터를 받는다면, 해당 포트를 제외하고 모든 포트로도 받은 데이터를 전달한다(플로딩, flooding)
- 허브는 모든 포트로 데이터를 보내고, 받는 쪽에서는 본인이 받을 데이터가 아니면 무시한다
- **더미 허브**(dummy hub)라고도 불린다
- 언뜻 보면 비효율적인 동작으로 보일 수 있지만, 신호를 받고 싶은 랜 카드에게만 신호를 보내기 위해서는 어떤 포트에 어떤 랜 카드가 연결되어 있는지 기억해야 할 것이고, 따라서 내부에 저장장치가 필요할 것이고, 또 저장된 내용을 읽어 어떤 포트로 신호를 내보내야 할 지를 결정해야 하기 때문에 시간이 걸릴 것이며, 이런 동작을 하도록 장비를 만들어야 하기 때문에 장비 가격이 더 비싸질 것이다. (이런식으로 동작을 하는 기기를 스위치라고 한다)
- 현대에는 대부분 스위치로 대체됨
