# 네트워크의 규칙

- 네트워크에서도 서로 문제없이 통신을 하려면 규칙이나 약속이 필요
- 이와 같은 규칙을 **프로토콜**(protocol)이라고 한다
- 계층마다 있는 프로토콜은 서로 다른 계층에 영향을 주지 않는다
- 즉 각 계층은 독립적이다

# OSI모델과 TCP/IP 모델

## OSI 모델

- 초창기 네트워크는 회사마다 통신 규격이 달랐다
- ISO(국제 표준화 기구)에서 **OSI**(Open Systems Interconnection Reference Model) 모델이라는 표준 규격을 제정
- OSI 7계층이라고도 불리며, 컴퓨터 네트워크 프로토콜 디자인과 통신을 계층으로 나누어 개념적으로 설명한 것이다.
- 데이터 송수신은 컴퓨터에서 컴퓨터로 데이터를 전송하는 것
- 컴퓨터 내부에서 일어나는 여러 가지 일을, 7개의 계층(레이어)으로 나눠서 한다
- 구조
  - 응용 계층 (Application Layer) : 애프릴케이션에 대한 서비스 제공
  - 표현 계층 (Presentaion Layer) : 문자 코드, 압축, 암호화등 데이터를 변환
  - 세션 계층 (Session Layer) : 세션 체결, 통신 방식 결정
  - 전송 계층 (Transport Layer) : 신뢰할수 있는 통신 구현
  - 네트워크 계층 (Network Layer) : 다른 네트워크와 통신하기 위한 경로 설정 및 논리 주소 결정
  - 데이터 링크 계층 (Data Link Layer) : 네트워크 기기 간의 데이터 전송 및 물리 주소 결정
  - 물리 계층 (Physical Layer) : 시스템 간의 물리적 연결과 전기 신호를 변환 및 제어
- 데이터 전송시 데이터를 보내기위해 상위 계층에서 하위 계층으로 데이터를 전달하고, 수신 측은 하위 계층에서 상위 계층으로 데이터를 전달 받는다

## TCP/IP 모델

- 인터넷에서 범용적으로 사용하는 TCP 프로토콜과 IP 프로토콜을 OSI 7계층 형식에 맞추어 더 추상화(혹은 간략화) 시킨 모델
- 7계층을 4계층으로 바꾼다
- 구조
  - 응용 계층 (= 응용계층 + 표현 계층 + 세션 계층)
  - 전송 계층 (전송 계층)
  - 인터넷 계층 (네트워크 계층)
  - 네트워크 접속 계층 (데이터 링크 계층 + 물리 계층)

## 캡슐화 & 역캡슐화

- 상위계층에서 하위계층으로 데이터를 전송할때 필요한 정보를 앞에 붙인다(**헤더** 추가)
- 헤더에는 데이터를 전달받을 상대방에 대한 정보도 포함
- 헤더를 붙여나가는 행위를 **캡슐화**라고 함
- 수신쪽에서는 헤더를 하나씩 제거해나가는데 이를 **역캡슐화**라고 한다
- 예시
  1. 응용 계층에서 웹사이트에 접속하기 위해 요청 데이터 생성
  2. 전송 계층에서 데이터를 전달받고, 같은 전송 계층에서 신뢰할수 있는 통신이 이루어지도록 헤더 붙임
  3. 네트워크 계층에서는 다른 네트워크와 통신하기 위해 헤더를 붙임
  4. 데이터 링크 계층에서 **헤더**를 앞에 **트레일러**를 끝에 붙임 (트레일러는 데이터를 전달할때 마지막에 추가하는 정보)
  5. 데이터 링크 계층에서 데이터는 최종적으로 전기 신호로 변환
  6. 수신측에 도착
  7. 수신측에서는 역순으로 데이터링크 계층에서 헤더와 트레일러 제거
  8. 네트워크 계층에서 네트워크 계층 헤더 제거
  9. 전송 계층에서 전송 계층 헤더 제거
  10. 응용 계층에 웹사이트에 접속을 요청하는 데이터 전달
