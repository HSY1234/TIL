# 응용 계층 (application layer)

- OSI 모델의 최상위 계층으로 다양하게 존재하는 응용 환경에서 공통적으로 필요한 기능을 다룬다
- 이메일, 파일 전송, 웹 사이트 조회 등 애플리케이션에 대한 서비스를 제공하는 계층
- 시스템간의 응용 처리는 상호간에 통신하면서 일련의 업무를 처리할 수 있도록 필요한 서비스 기능을 제공한다
- 웹브라우저, 메일 프로그램 등등 응용 애플리케이션은 **응용계층**에서 동작
- 서비스를 요청하는 애플리케이션을 **클라이언트**
- 서비스를 제공하는 애플리케이션을 **서버**
- 세션, 표현 계층을 합쳐서 설명
- 응용 계층에서는 사용자 측의 요청을 전달하기 위해 통신 대상이 이해 할수 있는 메세지(데이터)로 변환하고 전송계층으로 전달하는 역할
- 클라이언트측 애플리케이션(웹 브라우저, 메일 프로그램)과 서버측 애플리케이션(웹 서버 프로그램, 메일 서버 프로그램)과 통신하려면 응용 계층의 **프로토콜**을 사용
- 응용계층의 프로토콜 종류
  - HTTP (HyperText Transfer Protocol) : 웹사이트
  - FTP (File Transfer Protocol): 파일 전송
  - SMTP (Simple Mail Transfer Protocol): 메일 보낼때
  - POP3 (Post Office Protocol version): 메일 수신할때
  - DNS (Domain Name System): 네트워크에서 컴퓨터나 네트워크 장비에 붙여진 이름 기반으로 IP주소를 알아낼때 (이름해석, name resolution)

# 웹서버

## WWW(World Wide Web)

- 인터넷의 핵심적인 역할 WWW, W3, Web(웹)이라고 불림
- 웹은 **HTML**이라는 문서 형태와 **HTTP**라는 문서 전송 프로토콜, **URL**로 문서의 위치를 표시하는 시스템을 말합니다.
- WWW에는 HTML, URL, HTTP 3가지 핵심 기술이 사용됨
- 인터넷 ≠ 웹
  - 인터넷 : TCP/IP 프로토콜 기반의 네트워크가 세계적으로 확대되어 연결된 네트워크들의 통신망
  - 웹 : HTTP 프로토콜을 기반으로 HTML로 작성된 하이퍼텍스트 페이지를 '웹 브라우저'라는 특정한 프로그램으로 읽을 수 있게 하도록 구성되어 있다

## HTTP (HyperTexT Protocol)

- 하이퍼텍스트를 빠르게 교환하기 위한 프로토콜의 일종으로, 서버와 클라이언트의 사이에서 어떻게 메시지를 교환할지를 정해 놓은 규칙이다. **HTTP 요청**(HTTP Request)과 **HTTP 응답**(HTTP Response)으로 구성되어 있으며, 일반적으로 80번 포트를 사용한다.
- 클라이언트가 데이터를 요청할때는 "GET"이라고 하는 요청 정보, 파일 이름, 버전 등을 서버에 전송
- 서버는 응답으로 요청을 정상적으로 처리했다는 "OK"라는 정보를 반환하고 index.html 보낸다
- 예시
  - GET/index.html HTTP/1.1
  - HTTP/1.1 200 OK
- 지금은 HTTP/2 나 HTTP/1.1 버전을 사용
- 예전에는 HTTP/1.0버전을 요청을 보낼 때마다 연결했다 끊는 작업을 반복 (효율이 낮음 => 1.1)
- HTTP 1.0 예시
  1. 연결 수립
  2. 클라이언트 요청
  3. 서버 응답
  4. 연결 끊기
  5. 연결 수립
  6. 클라이언트 요청
  7. 서버 응답
  8. 연결 끊기
- **HTTP/1.1** 버전에 **keepalive**기능이 추가되었다
- keepalive는 연결을 한번 수립하면 데이터 교환을 마칠 때까지 유지하고, 데이터 교환을 모두 끝내면 연결을 끊는 구조, 여전히 요청-응답-요청-응답은 순서 반복은 유지
- HTTP/1.1 버전에서 순서대로 응답반환시 응답이 늦으면, 다음 요청에 대한 처리도 늦어짐
- HTTP/1.1 예시
  1. 연결 수립
  2. 클라이언트 요청
  3. 서버 응답 (2의 응답)
  4. 클라이언트 요청
  5. 서버 응답 (4의 응답)
  6. 연결 끊기
- **HTTP/2**에서는 요청을 보낸 순서대로 응답을 반환하지 않아도 됨, 콘텐츠의 빠른 표시 가능
- HTTP/2 예시 (요청 순서와 응답 순서 상관X)
  1. 연결 수립
  2. 클라이언트 요청
  3. 클라이언트 요청
  4. 클라이언트 요청
  5. 서버 응답
  6. 서버 응답
  7. 서버 응답
  8. 연결 끊기

# DNS (Domain Name System)

- 응용계층에서 이름 해석을 통해 도메인 이름을 IP주소로 변환하는 역할
- 서버에 접근하기위해서는 서버 컴퓨터가 있는 **IP 주소**를 알아야한다
- IP주소는 기억하고 입력하기 어렵기 때문에 **URL**(Uniform Resource Locator)을 IP주소로 변환하는 DNS의 **이름 해석**(name resoulution) 이용
- **DNS 서버**가 웹 사이트 서버의 IP 주소를 알려주는것을 이름해석이라고 한다
- www.google.com과 같이 컴퓨터나 네트워크를 식별하기 위해 붙여진 이름을 **도메인 이름**이라고 한다
- DNS로 IP주소를 취득하는 과정
  1. 웹브라우저에 URL을 입력하여 접속
  2. DNS서버는 해당 요청에 해당하는 도메인의 IP주소를 알려준다
  3. 컴퓨터는 IP 주소로 서버에 접속
- DNS서버가 IP주소를 모르는 경우
  1. 웹브라우저에 URL을 입력하여 접속
  2. DNS서버는 해당 요청에 해당하는 도메인의 IP주소를 모르면
  3. 다른 DNS 서버에게 URL에 해당하는 IP주소를 요청한다
  4. IP주소를 알아낸 DNS서버는 컴퓨터에게 IP주소 반환
  5. 컴퓨터는 IP 주소로 서버에 접속
- DNS 서버는 전세계에 흩어져 있고 모두 계층적으로 연결되어 있다

# 메일 서버와 구조 (SMTP와 POP3)

- **SMTP** : 메일을 보내는데 사용되는 프로토콜, 포트번호 25
- **POP3** : 메일을 수신하는데 사용되는 프로토콜, 포트번호 110
- 과정
  1. SMTP를 사용해 메일 프로그램이 메일서버로 메일을 보낸다
  2. SMTP를 사용해 메일 서버가 다른 메일 서버로 메일을 보낸다
  3. POP3를 사용해 메일 서버가 컴퓨터에 메일 데이터를 보낸다
- SMTP 메일 송신 과정 (사이사이에 확인 응답함)
  1. 세션 시작을 통지한다
  2. 송신자의 메일 주소를 통지한다
  3. 목적지 메일 주소를 통지한다
  4. 메일 본문 전송을 통지한다
  5. 메일 본문을 송신한다
  6. 세션 종료를 통지한다
- SMTP로 보낸 메일은 메일 서버의 **메일 박스**라는 메일을 보관해주는 기능으로 메일 보관
- 메일 서버는 메일 박스에서 메일을 가져와 컴퓨터로 송신
- POP3시에는 **사용자 인증**과정이 필요하다
- POP3에 의한 메일 수신 과정 (컴퓨터 => 메일 서버)
  1. 세션 시작을 통지한다
  2. 수신자의 사용자 이름을 통지한다 (메일 서버에 OK라는 확인 응답을 반환)
  3. 수순자의 비밀번호를 통지한다 (메일 서버에 비밀번호 확인이라는 확인 응답 반환)
  4. 메일을 확인한다 (메일서버는 메일이 있는지 확인하고 있음이라는 확인 응답을 반환)
  5. 메일 전송을 요청한다(메일 박스에 보관된 이메일을 전송받는다)
  6. 세션 종료를 통지한다
