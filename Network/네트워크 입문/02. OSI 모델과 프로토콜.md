# 역사

- 1960 ~ 1970년대 각 업체가 자신들의 컴퓨터끼리 네트워크를 사용하기위해 각자 프로토콜을 만듬
- 다른 회사와 규격이 달라 호환되지 않음
- ISO가 규격을 표준화하려했으나 실패
- ISO는 이떄 OSI 참조 모델을 선언, 데이터 통신 단계의 구성도

# OSI 모델

- 데이터 통신을 단계로 나누어 각 단계의 순서를 명확히하고, 이 모델에 따라 **프로토콜**을 정의
- 표준화는 실패했지만 데이터 통신을 이해하는데 매우 유용
- 데이터 통신을 7개의 단계로 나누고, 각 단계를 계층(레이어,Layer)라고 한다
- OSI 모델
  - 제 7계층 : 응용 계층 : 사용자에게 네트워크 서비스를 제공한다
  - 제 6계층 : 표현 계층 : 데이터의 형식을 결정한다
  - 제 5계층 : 세션 계층 : 데이터 송수신의 순서 등을 결정한다
  - 제 4계층 : 전송 계층 : 신뢰성 높은(에러가 적은) 전송을 시행한다
  - 제 3계층 : 네트워크 계층 : 전송 규칙과 수신처를 결정한다
  - 제 2계층 : 데이터 링크 계층 : 인접기 사이의 데이터 전송을 제어한다
  - 제 1계층 : 물리 계층 : 전기 기계적인 부분의 전송을 시행
- 각 계층마다 각각의 역할과 규칙이 있다 = **각 단계마다의 복수의 프로토콜**이 존재
- 각 계층은 각각 **독립적**이다, 한 계층의 프로토콜의 변경은 다른계층에 영향을 끼치지 않는다
- 하위 계층은 상위 계층을 위해 일하고, 상위계층은 하위 계층에 관여하지 않는다

# 캡슐화

- 데이터를 전달하기 위해서는 해당 데이터뿐만 아니라, 다른것도 필요하다
- 수신처, 송신처의 주소 외에도 여러가지 오류검출 상태 프로토콜 정보 등
- 각 계층에는 단계를 실시할때마다 데이터를 추가할수 있다
- 각 계층에서 데이터와 필요한것들이 모두 결합되어 다음 계층에 갈수 있는 상태를 **PDU**(Protocol Data Unit)이라고 한다
- PDU의 호칭
  - 사용자 : 데이터(data)
  - 7,6,5 단계 : 메세지(Message)
  - 4단계 : 세그먼트(TCP), 데이터그램(UDP)
  - 3단계 : 패킷(IP 패킷), 데이터 그램
  - 2단계 : 프레임(Frame)
  - 1단계 : 신호, 비트(스트림)
- 각 계층에서 데이터에 제어정보를 붙여 PDU를 완성하는것을 **캡슐화**(Encapsulation)이라 한다
- 캡슐화 과정에서 데이터 앞에 **헤더**나 끝에 **트레일러**를 붙인다, 각 계층이나 프로토콜 이름을 붙여서 호칭한다 (TCP 헤더, 4계층 헤더)
- 수신쪽에서 헤더나 트레일러를 제거하는것을 **역캡슐화**라고 한다

# 프로토콜

- 데이터 통신을 위한 규칙
- 데이터 통신에 필요한 프로토콜은 1개가 아니고 복수의 프로토콜로 이루어진다
- 계층은 독립적이지만, 상위 계층 프로토콜이 하위 계층 프로토콜을 이용할수 있는 구조를 가지고, 하위 계층 프로토콜이 상위 계층 프로토콜에 데이터를 전송할 수 있는 구조를 가져야한다. = 인터페이스가 있다
- 상하 프로토콜에서 인터페이스를 결정해둔것이 **프로토콜 군**(Protocol Suite)
- 상위 프로토콜과 하위 프로토콜을 연결하는 인터페이스인 프로토콜군을 사용하는지에 따라 7~1 계층의 프로토콜이 정해진다
- 계층마다 멋대로 프로토콜을 사용한다고 다 통신이 되지 않고, 같은 프로토콜군 내에서 계층마다 선택지가 생긴다.
- 결국 데이터 통신은 같은 프로토콜군을 사용하는 컴퓨터와 기기끼리만 사용이 가능

## 프로토콜이 결정하는 것들

- 프로토콜마다 어떤 **헤더**를 붙일지 정해져있다
- 두 컴퓨터가 **데이터를 주고받는 순서**도 프로토콜로 정해져 있다
  - 보내면 답이 올때까지 보내지 않는다
  - 답이 오든지 말든지 계속 보낸다
  - 두개 연속으로 보내고 답이 한개 올때까지 대기
  - 등등
- 현재의 상태, 에러의 수정, 사용설정 등등
- ISO에서 OSI 모델에 따라 프로토콜군을 통일하려 했으나 실패 (OSI 표준 프로토콜군)
- 현재는 OSI 표준 프로토콜을 대신해 **TCP/IP 프로토콜군**을 가장 많이 쓰고, 이는 인터넷에서 이용된다
- TCP/IP 프로토콜군이 현재 사실상 표준

# TCP/IP 모델

- TCP/IP 프로토콜군은 IETF(the Internet Engineering Task Force)가 제정
- TCP/IP 프로토콜군은 국제인터넷표준화기구인 IETF에서 RFC(Request For Comments) 기술문서에서 정해졌다
- TCP/IP 프로토콜군은 TCP/IP 모델 기반으로 만들어졌다
- TCP/IP 모델
  - 4계층 : 애플리케이션 계층 (응용 + 표현 + 세션) : HTTP, FTP, SMTP
  - 3계층 : 트랜스포트 계층 (전송) : TCP, UDP
  - 2계층 : 인터넷 계층 (네트워크) : IP, ARP
  - 1계층 : 네트워크 접근 or 인터페이스 계층 (데이터링크 + 물리) : 이더넷, 프레임 릴레이, PPP
- 사실 정확히 말하면 이더넷은 TCP/IP 프로토콜군이 아니다. TCP/IP 프로토콜군이 이 프로토콜을 사용할수 있다는 의미
