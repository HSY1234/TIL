## 데이터 호출 시점

1. 라우터 네비게이션 가드

- 특정 URL로 접근하기 전의 동작을 정의하는 속성(함수)

2. 컴포넌트 라이프 사이클 훅

- created : (컴포넌트가 생성)되자마자 호출되는 로직(마운트 전)

## 그래서 뭔 차이야?

라우터 네비게이션 가드가 먼저 진행되고, 그 다음 컴포넌트 라이프 사이클 훅이 진행된다.  
이걸 구별해야하는 이유 => 사용자 UX에서 문제가 발생한다.

서로 다른 URL에서 공유되는 store의 같은 변수를 쓰지만, 시작할때 값은 달라야 할 경우 컴포넌트 사이클 훅에서 보통 값을 변경하는데

라우팅이 진행 됐을때 미세하지만 다른 URL에서, 변경되기 이전 값이 살짝 보인다. 즉 특정화면에 데이터를 공유했을때 문제점이다.

해결방법 1. Store의 각각 다른 변수에 저장한다(바뀔일이 없으니)
해결방법 2. 라우터 네비게이션 가드를 이용한다.

## 라우터 네비게이션 가드란?

뷰 라우터로 특정 URL에 접근할때 URL 접근을 막는 방법으로, 가장 많이 사용되는 쪽은 사용자의 인증 정보가 없으면 특정 페이지에 접근하지 못하게 할 때 사용하는 기술입니다.

- beforeEach
- beforeEnter

## 구현방법

라우터 파일에서

```js
routes: [
  {
    path: "/user",
    name: "user",
    component: UserView,
    befoerEnter: (to, from, next) => {
      // 라우터 가드
      //to : 이동할 URL의 라우팅 정보
      //from: 이동전 URL의 라우팅 정보
      //next: 다음 페이지로 이동하는 함수, next(); 함수가 호출되지 않으면 그 페이지로 라우팅이 안됨
    },
  },
];
```

라우터 가드의 beforeEnter 함수 내부에서 스피너를 호출해서 스피너를 돌아가게 할수있다.

또한 스토어의 dispatch 같이 스토어의 함수도 미리 호출해서 라우팅되기전에 다 할수있다.
(원래 created에서 하던걸 여기에 끌고와서 미리할수 있다.)

이러면 데이터 호출이 끝나고 스피너가 종료되는데 이는 우리가 의도한게 아님 => 페이지 로딩이 다 끝났는데, 스피너가 아주 살짝 살아있다.(거슬림)  
=> mounted에 붙이면 해결!
