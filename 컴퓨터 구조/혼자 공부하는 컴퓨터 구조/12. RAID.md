# RAID

- RAID(Redundant Array of Independent Disks, 복수 배열 독립 디스크)
- 데이터 안정성 혹은 높은 성능을 위해 여러 개의 물리적 보조기억장치를 하나의 논리적 보조기억장치 처럼 사용하는 기술
- 4TB 하드디스크 보다 1TB 4개로 RAID를 구성하는것이 성능과 안정성이 더 좋다

## RAID의 종류

- RAID 구성방법을 **RAID 레벨**이라고 함
  - RAID 0
  - RAID 1
  - RAID 2
  - RAID 3
  - RAID 4
  - RAID 5
  - RAID 6
  - RAID 10
  - RAID 50
  - 등등

## RAID 0

- 단순하게 여러개의 보조기억장치에 데이터를 단순히 나누어 저장하는 방식
- 저장할때 하드 디스크는 번갈아 가며 데이터를 저장, 하드디스크 개수만큼 나뉘어짐
- A1, A2, A3, A4, B1, B2, B3, B4, C1, C2, C3, C4, D1, D2, D3, D4
  - HDD1: A1, B1, C1, D1
  - HDD2: A2, B2, C2, D2
  - HDD3: A3, B3, C3, D3
  - HDD4: A4, B4, C4, D4
- 줄무늬 처럼 분산되어 저장된 데이터를 **스트라입**(stripe)이라 하고, 분산하여 저장하는 것을 **스트라이핑**(striping)이라고 한다
- 스트라이핑된 데이터는 읽고 쓰는 속도가 분산개수배로 빨라짐, 한 데이터를 여러번에 걸쳐 읽고 쓰는 작업이 동시에 읽고 쓰기가 가능해짐 A => A1, A2, A3, A4
- 그러나 저장된 정보가 안전하지 않음, 하드 하나에 문제가 생기면 데이터 복구 불가

## RAID 1

- 복사본을 만드는 방식, RAID 0의 디스크 손상에 대처하기 위해 나옴
- 복사본을 만들기 때문에 미러링(mirroring)이라고도 부름
- A1, A2, B1, B2, C1, C2, D1, D2,
  - HDD1: A1, B1, C1, D1
  - HDD2: A1, B1, C1, D1
  - HDD3: A2, B2, C2, D2
  - HDD4: A2, B2, C2, D2
- RAID 0보다 느림
- 그러나 사용 가능한 용량이 적어지는 단점이 있음

## RAID 4

- RAID 1처럼 완전한 복사본을 만드는 대신 오류를 검출하고 복구하기 위한 정보를 저장한 장치를 둔다
- 이 오류를 검출하고 복구하기 위한 정보를 **패리티 비트**(parity bit)라고함
- A1, A2, A3, B1, B2, B3, C1, C2, C3, D1, D2, D3
  - HDD1: A1, B1, C1, D1
  - HDD2: A2, B2, C2, D2
  - HDD3: A3, B3, C3, D3
  - HDD4: 패리티 A, 패리티 B, 패리티 C, 패리티 D
- 패리티 비트를 저장한 장치로 오류를 검출하고, 오류를 복구한다.
- 원래 패리티 비트는 오류 검출만 하는 비트지만, RAID에서는 패리티 값으로 오류수정도 가능
- 오류 수정을 위한 패리티 계산법은 매우 다양하다(패리티 방식은 여러개)

## RAID 5

- RAID 4에서는 새로운 데이터가 저장될때 마다, 패리티 데이터가 업데이트 되어야 하므로 패리티 디스크가 혼자 계속 업데이트되어 병목 현상이 발생함
- 이를 해결하기 위해 패리티 부분을 다른 디스크에 각각 분산시켜 저장함
- A1, A2, A3, B1, B2, B3, C1, C2, C3, D1, D2, D3
  - HDD1: A1, B1, C1, 패리티 D
  - HDD2: A2, 패리티 B, C2, D1
  - HDD3: A3, B2, 패리티 C, D2
  - HDD4: 패리티 A, B3, C3, D3

## RAID 6

- RAID 4,5 도 결국 한 디스크가 죽으면 문제 발생(특히 패리티)
- 같은 데이터를 위한 서로 다른 방식의 패리티를 2개 만들어 저장
- A1, A2, A3, B1, B2, B3, C1, C2, C3, D1, D2, D3
  - HDD1: A1, B1, C1, 패리티1 D
  - HDD2: A2, B2, 패리티1 C, 패리티2 D
  - HDD3: A3, 패리티1 B, 패리티2 C, D1
  - HDD4: 패리티1 A, 패리티2 B, C2, D2
  - HDD5: 패리티2 A, B3, C3, D3
- 데이터 별로 패리티가 2개이므로 오류 검출 복구 수단이 2개 => 훨씬 안전
- 그러나 데이터 수정시 패리티 2부분을 읽고 써야하므로 RAID 5보다 느림

## RAID 10

- RAID 혼합방식(Nested RAID)
- RAID 1 + RAID 0

## RAID 50

- RAID 혼합방식(Nested RAID)
- RAID 5 + RAID 0
